<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: widgets/horizontalprogress.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: widgets/horizontalprogress.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileOverview Requirejs module containing the antie.widgets.HorizontalProgress class.
 * @preserve Copyright (c) 2013-present British Broadcasting Corporation. All rights reserved.
 * @license See https://github.com/fmtvp/tal/blob/master/LICENSE for full licence
 */

define('antie/widgets/horizontalprogress',
    [
        'antie/widgets/container',
        'antie/widgets/label'
    ],
    function(Container, Label) {
        'use strict';

        /**
         * The horizontal progress widget provides a UI control for showing progress (with associated label)
         * @name antie.widgets.HorizontalProgress
         * @class
         * @extends antie.widgets.Container
         * @requires antie.widgets.Label
         * @param {String} [id] The unique ID of the widget. If excluded, a temporary internal ID will be used (but not included in any output).
         * @param {Boolean} [showLabel] Pass &lt;code>true&lt;/code> to show a label that indicates the value of the progress shown.
         * @param {Float} [initialValue] The initial value (default 0).
         */
        return Container.extend( /** @lends antie.widgets.HorizontalProgress.prototype */ {
            /**
             * @constructor
             * @ignore
             */
            init: function init (id, showLabel, initialValue) {
                this._value = initialValue ? initialValue : 0;
                this._moveHandle = false;
                this._lastLeft = null;

                init.base.call(this, id);
                this.addClass('horizontalprogress');

                if (showLabel) {
                    this._label = new Label(id + '_label', '');
                    this.addClass('haslabel');
                }
            },
            /**
             * Renders the widget and any child widgets to device-specific output.
             * @param {antie.devices.Device} device The device to render to.
             * @returns A device-specific object that represents the widget as displayed on the device (in a browser, a DOMElement);
             */
            render: function render (device) {
                this.outputElement = device.createContainer(this.id, this.getClasses());
                this._leftElement = device.createContainer(this.id + '_left');
                this._innerElement = device.createContainer(this.id + '_inner');
                device.appendChildElement(this._leftElement, this._innerElement);
                device.appendChildElement(this.outputElement, this._leftElement);

                if (this._label) {
                    device.appendChildElement(this.outputElement, this._label.render(device));
                }

                this._moveInner();

                return this.outputElement;
            },
            /**
             * Moves the inner element to show the current value.
             * @private
             */
            _moveInner: function _moveInner () {
                var device = this.getCurrentApplication().getDevice();
                var elsize = device.getElementSize(this._leftElement);
                var handleSize = device.getElementSize(this._innerElement);
                var left = Math.floor(this._value * (elsize.width - handleSize.width));

                if (left !== this._lastLeft) {
                    this._lastLeft = left;

                    if (this._moveHandle) {
                        device.stopAnimation(this._moveHandle);
                    }

                    var config = device.getConfig();
                    var animate = !config.widgets || !config.widgets.horizontalprogress || (config.widgets.horizontalprogress.animate !== false);
                    this._moveHandle = device.moveElementTo({
                        el: this._innerElement,
                        to: {
                            left: left
                        },
                        skipAnim: !animate
                    });
                }
            },
            /**
             * Returns the current value shown by the progress indicator.
             */
            getValue: function getValue () {
                return this._value;
            },
            /**
             * Sets the current value to be shown by the progress indicator.
             * @param {Float} val The value to show (between 0.0 and 1.0 inclusive).
             */
            setValue: function setValue (val) {
                this._value = val;
                this._moveInner();
            },
            /**
             * Sets the text to show in the label.
             * @param {String} val The text to show.
             */
            setText: function setText (val) {
                if (this._label) {
                    this._label.setText(val);
                }
            }
        });
    });
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="antie.devices.BrowserDevice.html">BrowserDevice</a></li><li><a href="antie.devices.Device.html">Device</a></li><li><a href="antie.events.AfterAlignEvent.html">AfterAlignEvent</a></li><li><a href="antie.events.BeforeAlignEvent.html">BeforeAlignEvent</a></li><li><a href="antie.events.BeforeSelectedItemChangeEvent.html">BeforeSelectedItemChangeEvent</a></li><li><a href="antie.events.BlurEvent.html">BlurEvent</a></li><li><a href="antie.events.ComponentEvent.html">ComponentEvent</a></li><li><a href="antie.events.DataBoundEvent.html">DataBoundEvent</a></li><li><a href="antie.events.Event.html">Event</a></li><li><a href="antie.events.FocusDelayEvent.html">FocusDelayEvent</a></li><li><a href="antie.events.FocusEvent.html">FocusEvent</a></li><li><a href="antie.events.KeyEvent.html">KeyEvent</a></li><li><a href="antie.events.MediaErrorEvent.html">MediaErrorEvent</a></li><li><a href="antie.events.MediaEvent.html">MediaEvent</a></li><li><a href="antie.events.MediaSourceErrorEvent.html">MediaSourceErrorEvent</a></li><li><a href="antie.events.NetworkStatusChangeEvent.html">NetworkStatusChangeEvent</a></li><li><a href="antie.events.PageChangeEvent.html">PageChangeEvent</a></li><li><a href="antie.events.SelectedItemChangeEvent.html">SelectedItemChangeEvent</a></li><li><a href="antie.events.SelectEvent.html">SelectEvent</a></li><li><a href="antie.events.SliderChangeEvent.html">SliderChangeEvent</a></li><li><a href="antie.events.TextChangeEvent.html">TextChangeEvent</a></li><li><a href="antie.events.TextPageChangeEvent.html">TextPageChangeEvent</a></li><li><a href="antie.events.TunerPresentingEvent.html">TunerPresentingEvent</a></li><li><a href="antie.events.TunerStoppedEvent.html">TunerStoppedEvent</a></li><li><a href="antie.events.TunerUnavailableEvent.html">TunerUnavailableEvent</a></li><li><a href="antie.widgets.Button.html">Button</a></li><li><a href="antie.widgets.Carousel.html">Carousel</a></li><li><a href="antie.widgets.Component.html">Component</a></li><li><a href="antie.widgets.ComponentContainer.html">ComponentContainer</a></li><li><a href="antie.widgets.Container.html">Container</a></li><li><a href="antie.widgets.Grid.html">Grid</a></li><li><a href="antie.widgets.HorizontalCarousel.html">HorizontalCarousel</a></li><li><a href="antie.widgets.HorizontalList.html">HorizontalList</a></li><li><a href="antie.widgets.HorizontalProgress.html">HorizontalProgress</a></li><li><a href="antie.widgets.HorizontalSlider.html">HorizontalSlider</a></li><li><a href="antie.widgets.Image.html">Image</a></li><li><a href="antie.widgets.Keyboard.html">Keyboard</a></li><li><a href="antie.widgets.Label.html">Label</a></li><li><a href="antie.widgets.List.html">List</a></li><li><a href="antie.widgets.ScrubBar.html">ScrubBar</a></li><li><a href="antie.widgets.TextPager.html">TextPager</a></li><li><a href="antie.widgets.VerticalList.html">VerticalList</a></li><li><a href="antie.widgets.Widget.html">Widget</a></li></ul><h3>Namespaces</h3><ul><li><a href="antie.devices.html">devices</a></li><li><a href="antie.devices.anim.html">anim</a></li><li><a href="antie.devices.broadcastsource.html">broadcastsource</a></li><li><a href="antie.devices.media.html">media</a></li><li><a href="antie.devices.net.html">net</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_registerWiiRemoteInputControls">_registerWiiRemoteInputControls</a></li><li><a href="global.html#_registerWiiUGamePadInputControls">_registerWiiUGamePadInputControls</a></li><li><a href="global.html#addKeyEventListener">addKeyEventListener</a></li><li><a href="global.html#isHDEnabled">isHDEnabled</a></li><li><a href="global.html#loadAuthenticatedURL">loadAuthenticatedURL</a></li><li><a href="global.html#requirejs">requirejs</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Sep 22 2017 16:04:10 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
